<html>

<head>

<title>Geolocation</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
</head>

<body background="Rovel_55.jpg">

<center>
    <header>

      <font face="Comic Sans MS" size="5" color="#3399ff">Местоположение</font><br>

    </header>


<a id="email" href="mailto:?subject=My%20Location&body=" >Изпрати E-mail с местоположението ми</a>



<section id="wrapper">


<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <article>
<font face="Comic Sans MS" size="2" color="#ff0000">
      <p>Намиране на местоположение: <span id="status">търсене...</span></p>
</font>
    </article>

<script>

function success(position) {

  var s = document.querySelector('#status');

  s.innerHTML = "Намерено!";

  s.className = 'success';

  

  var mapcanvas = document.createElement('div');

  mapcanvas.id = 'mapcanvas';

  mapcanvas.style.height = '400px';

  mapcanvas.style.width = '560px';

    

  document.querySelector('article').appendChild(mapcanvas);

  



var em = document.getElementById('email');

var attr = em.getAttribute('href');



attr = attr + escape('http://maps.google.com/?q='+position.coords.latitude+','+position.coords.longitude);



em.setAttribute('href', attr);

 



  var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

  var myOptions = {

    zoom: 15,

    center: latlng,

    mapTypeControl: false,

    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},

    mapTypeId: google.maps.MapTypeId.ROADMAP

  };

  var map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);

  

  var marker = new google.maps.Marker({

      position: latlng, 

      map: map, 

      title:"Вие сте тук!"

  });

}



function error(msg) {

  var s = document.querySelector('#status');

  s.innerHTML = typeof msg == 'string' ? msg : "Не е намерено";

  s.className = 'fail';

}



if (navigator.geolocation) {

  navigator.geolocation.getCurrentPosition(success, error);

} else {

  error('not supported');

}



</script>

</section>
<font face="Comic Sans MS" size="2" color="#3399ff">
<hr color="#FCB100"/>
<i>Мобилни приложения с ръководител Даниел Дилов</i>
</font>
</center>
</body>

</html>
